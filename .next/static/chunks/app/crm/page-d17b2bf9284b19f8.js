(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{7591:function(e,s,t){Promise.resolve().then(t.bind(t,3687))},3687:function(e,s,t){"use strict";let a;t.r(s),t.d(s,{default:function(){return eL}});var l=t(7437),r=t(2265);let n=e=>{let s;let t=new Set,a=(e,a)=>{let l="function"==typeof e?e(s):e;if(!Object.is(l,s)){let e=s;s=(null!=a?a:"object"!=typeof l||null===l)?l:Object.assign({},s,l),t.forEach(t=>t(s,e))}},l=()=>s,r={setState:a,getState:l,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e))},n=s=e(a,l,r);return r},i=e=>e?n(e):n,d=e=>e,o=e=>{let s=i(e),t=e=>(function(e,s=d){let t=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>s(e.getState()),[e,s]),r.useCallback(()=>s(e.getInitialState()),[e,s]));return r.useDebugValue(t),t})(s,e);return Object.assign(t,s),t},c=[{id:"1",company:"Acme Inc.",status:"New",owner:"Yash",value:5e3,nextFollowUp:"2024-07-10",customFields:{notes:"Initial contact made."}},{id:"2",company:"Globex Corp.",status:"In Progress",owner:"Alexis",value:2500,nextFollowUp:"2024-07-12",customFields:{notes:"Sent proposal."}},{id:"3",company:"Soylent Corp.",status:"Negotiation",owner:"Ops",value:8e3,nextFollowUp:"2024-07-15",customFields:{notes:"Discussing terms."}},{id:"4",company:"Initech",status:"Won",owner:"Yash",value:3200,nextFollowUp:"2024-07-18",customFields:{notes:"Contract signed."}},{id:"5",company:"Umbrella Corp.",status:"Lost",owner:"Alexis",value:1500,nextFollowUp:"2024-07-20",customFields:{notes:"Client went with competitor."}},{id:"6",company:"Hooli",status:"New",owner:"Ops",value:4200,nextFollowUp:"2024-07-22",customFields:{notes:"Follow up next week."}},{id:"7",company:"Stark Industries",status:"Negotiation",owner:"Yash",value:9e3,nextFollowUp:"2024-07-25",customFields:{notes:"High potential deal."}},{id:"8",company:"Wayne Enterprises",status:"In Progress",owner:"Ops",value:6100,nextFollowUp:"2024-07-28",customFields:{notes:"Meeting scheduled."}}],x=(a=(e,s)=>({items:c,total:c.length,page:1,pageSize:10,q:"",status:"All",owner:"",customFields:[],setFilters:t=>{e({...t,page:1}),s().refresh()},setPage:t=>{e({page:t}),s().refresh()},refresh:async()=>{let{q:t,status:a,owner:l,page:r,pageSize:n,items:i}=s(),d=i;t&&(d=d.filter(e=>e.company.toLowerCase().includes(t.toLowerCase()))),a&&"All"!==a&&(d=d.filter(e=>e.status===a)),l&&"All"!==l&&(d=d.filter(e=>e.owner===l));let o=d.length,c=(r-1)*n;e({items:d.slice(c,c+n),total:o})},addLead:async t=>{let a={id:String(Date.now()),...t,status:t.status||"New",owner:t.owner||"Yash",customFields:t.customFields||{}};return e(e=>({items:[...e.items,a],total:e.total+1})),await s().refresh(),a},updateLead:async(t,a)=>{e(e=>({items:e.items.map(e=>e.id===t?{...e,...a}:e)})),await s().refresh()},deleteLead:async t=>{e(e=>({items:e.items.filter(e=>e.id!==t),total:e.total-1})),await s().refresh()},addCustomField:s=>{e(e=>({customFields:[...e.customFields,s]}))},renameCustomField:(s,t,a)=>{e(e=>({customFields:e.customFields.map(e=>e.name===s?{name:t,label:a}:e),items:e.items.map(e=>{if(e.customFields&&s in e.customFields){let a={...e.customFields};return a[t]=a[s],delete a[s],{...e,customFields:a}}return e})}))},deleteCustomField:s=>{e(e=>({customFields:e.customFields.filter(e=>e.name!==s),items:e.items.map(e=>{if(e.customFields&&s in e.customFields){let t={...e.customFields};return delete t[s],{...e,customFields:t}}return e})}))}}))?o(a):o;var m=t(9733),h=t(6864),u=t(420),p=t(4919),b=t(2365),j=t(2092),g=t(3907),f=t(994),v=t(8184),N=t(2023),w=t(933),y=t(9354),C=t(7209),k=t(402),F=t(9888),S=t(9081),z=t(1413),A=t(6343);let U=["New","In Progress","Negotiation","Won","Lost"],P=["Yash","Alexis","Ops"],D=["Critical","High","Medium","Low"];function L(e){let{lead:s,open:t,onClose:a,onSaved:n}=e,[i,d]=(0,r.useState)(s),[o,c]=(0,r.useState)(!1),[L,M]=(0,r.useState)([]),[I,Z]=(0,r.useState)(!1),[O,_]=(0,r.useState)("updates"),{addLead:T,updateLead:V}=x(),[E,q]=(0,r.useState)([]),[W,B]=(0,r.useState)([]),[H,Y]=(0,r.useState)(""),[Q,X]=(0,r.useState)(null),J=s&&s.id.startsWith("temp-");if((0,r.useEffect)(()=>{d(s),s&&t?(Z(!0),setTimeout(()=>{J?(M([]),q([]),B([])):(M([{id:"a1",field:"status",oldValue:"New",newValue:"In Progress",at:"2024-07-29T10:05:00Z"},{id:"a2",field:"value",oldValue:"5000",newValue:"5500",at:"2024-07-29T11:15:00Z"}]),q([{id:"1",author:{name:"Yash",initials:"Y"},timestamp:"2024-07-29T10:00:00Z",content:"Initial contact made. Client seems interested in our new product line."},{id:"2",author:{name:"Alexis",initials:"A"},timestamp:"2024-07-29T14:30:00Z",content:"Sent follow-up email with detailed proposal. Awaiting response."}]),B([{id:"1",name:"Proposal_AcmeInc.pdf",size:"1.2 MB",uploadedAt:"2024-07-29T14:35:00Z"}])),Z(!1)},500)):(M([]),q([]),B([]),Y(""),X(null))},[s,t,J]),!t||!i)return null;async function R(){c(!0);try{if(J){let e={company:i.company,status:i.status||"New",owner:i.owner||"Yash",value:i.value,nextFollowUp:i.nextFollowUp,customFields:{...i.customFields||{},...i.priority?{priority:i.priority}:{},...i.notes?{notes:i.notes}:{}}},s=await T(e);n&&n(s,i.id)}else{let e={company:i.company,status:i.status,owner:i.owner,value:i.value,nextFollowUp:i.nextFollowUp,customFields:i.customFields};await V(i.id,e),n&&n(i)}}finally{c(!1)}}return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-slate-900/30",onClick:a}),(0,l.jsxs)("aside",{className:"relative ml-auto w-full max-w-md bg-white h-full shadow-lg flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,l.jsx)("div",{className:"font-semibold text-lg text-slate-900",children:"Task Details"}),(0,l.jsx)("button",{className:"text-2xl text-slate-400 hover:text-slate-600",onClick:a,children:"\xd7"})]}),(0,l.jsxs)(h.mQ,{value:O,onValueChange:_,className:"flex flex-col flex-1",children:[(0,l.jsxs)(h.dr,{className:"grid w-full grid-cols-4 h-auto rounded-none border-b border-slate-200 bg-slate-50 p-0",children:[(0,l.jsxs)(h.SP,{value:"updates",className:"data-[state=active]:bg-white data-[state=active]:shadow-none data-[state=active]:border-b-2 data-[state=active]:border-emerald-600 data-[state=active]:text-emerald-800 rounded-none text-slate-600 hover:text-slate-900 py-3",children:["Updates (",E.length,")"]}),(0,l.jsxs)(h.SP,{value:"files",className:"data-[state=active]:bg-white data-[state=active]:shadow-none data-[state=active]:border-b-2 data-[state=active]:border-emerald-600 data-[state=active]:text-emerald-800 rounded-none text-slate-600 hover:text-slate-900 py-3",children:["Files (",W.length,")"]}),(0,l.jsx)(h.SP,{value:"activity",className:"data-[state=active]:bg-white data-[state=active]:shadow-none data-[state=active]:border-b-2 data-[state=active]:border-emerald-600 data-[state=active]:text-emerald-800 rounded-none text-slate-600 hover:text-slate-900 py-3",children:"Activity Log"}),(0,l.jsx)(h.SP,{value:"item-card",className:"data-[state=active]:bg-white data-[state=active]:shadow-none data-[state=active]:border-b-2 data-[state=active]:border-emerald-600 data-[state=active]:text-emerald-800 rounded-none text-slate-600 hover:text-slate-900 py-3",children:"Item Card"})]}),(0,l.jsxs)(h.nU,{value:"updates",className:"flex-1 flex flex-col p-4 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"border border-slate-200 rounded-lg p-3 mb-4 bg-slate-50",children:[(0,l.jsx)(p.g,{placeholder:"@mention someone, add an update...",className:"w-full border-none focus-visible:ring-0 resize-none bg-transparent text-slate-900 placeholder:text-slate-500",rows:3,value:H,onChange:e=>Y(e.target.value)}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.z,{variant:"ghost",size:"icon",className:"text-slate-500 hover:text-slate-700",children:(0,l.jsx)(b.Z,{className:"w-4 h-4"})}),(0,l.jsx)(m.z,{variant:"ghost",size:"icon",className:"text-slate-500 hover:text-slate-700",children:(0,l.jsx)(j.Z,{className:"w-4 h-4"})}),(0,l.jsx)(m.z,{variant:"ghost",size:"icon",className:"text-slate-500 hover:text-slate-700",children:(0,l.jsx)(g.Z,{className:"w-4 h-4"})})]}),(0,l.jsxs)(m.z,{size:"sm",onClick:()=>{if(H.trim()){let e={id:String(E.length+1),author:{name:"Current User",initials:"CU"},timestamp:new Date().toISOString(),content:H.trim()};q(s=>[e,...s]),Y("")}},disabled:!H.trim(),className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[(0,l.jsx)(f.Z,{className:"w-4 h-4 mr-2"})," Update"]})]})]}),(0,l.jsx)("div",{className:"flex-1 space-y-4",children:0===E.length?(0,l.jsx)("div",{className:"text-center text-slate-500 py-6",children:"No updates yet."}):E.map(e=>(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)(u.qE,{className:"w-8 h-8",children:(0,l.jsx)(u.Q5,{className:"bg-emerald-100 text-emerald-800",children:e.author.initials})}),(0,l.jsxs)("div",{className:"flex-1 bg-slate-50 rounded-lg p-3 border border-slate-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsx)("span",{className:"font-semibold text-slate-900",children:e.author.name}),(0,l.jsx)("span",{className:"text-xs text-slate-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,l.jsx)("p",{className:"text-sm text-slate-700",children:e.content})]})]},e.id))})]}),(0,l.jsxs)(h.nU,{value:"files",className:"flex-1 flex flex-col p-4 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("input",{id:"file-upload",type:"file",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files[0]){X(e.target.files[0]);let s={id:String(W.length+1),name:e.target.files[0].name,size:(e.target.files[0].size/1024/1024).toFixed(2)+" MB",uploadedAt:new Date().toISOString()};B(e=>[...e,s]),X(null)}}}),(0,l.jsxs)("label",{htmlFor:"file-upload",className:"flex items-center justify-center gap-2 px-4 py-2 border border-dashed border-slate-300 rounded-md cursor-pointer text-slate-700 hover:bg-slate-50 transition-colors",children:[(0,l.jsx)(v.Z,{className:"w-4 h-4"})," Upload File"]})]}),(0,l.jsx)("div",{className:"flex-1 space-y-2",children:0===W.length?(0,l.jsx)("div",{className:"text-center text-slate-500 py-6",children:"No files uploaded."}):W.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3 p-2 border border-slate-200 rounded-md bg-slate-50",children:[(0,l.jsx)(N.Z,{className:"w-5 h-5 text-slate-500"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-medium text-slate-900",children:e.name}),(0,l.jsxs)("div",{className:"text-xs text-slate-600",children:[e.size," - ",new Date(e.uploadedAt).toLocaleDateString()]})]})]},e.id))})]}),(0,l.jsxs)(h.nU,{value:"activity",className:"flex-1 flex flex-col p-4 overflow-y-auto",children:[(0,l.jsx)("div",{className:"font-semibold mb-2 text-slate-900",children:"Audit Trail"}),I?(0,l.jsx)("div",{className:"text-slate-500 text-sm",children:"Loading activity..."}):0===L.length?(0,l.jsx)("div",{className:"text-slate-500 text-sm",children:"No activity yet."}):(0,l.jsx)("ul",{className:"space-y-3 text-sm",children:L.map(e=>{var s,t;return(0,l.jsxs)("li",{className:"border-b border-slate-100 pb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-slate-700",children:[(0,l.jsx)(w.Z,{className:"w-4 h-4 text-slate-500"}),(0,l.jsx)("span",{className:"font-medium",children:e.field})," changed from\xa0",(0,l.jsx)("span",{className:"line-through text-rose-500",children:null!==(s=e.oldValue)&&void 0!==s?s:"—"}),"\xa0to\xa0",(0,l.jsx)("span",{className:"text-emerald-600",children:null!==(t=e.newValue)&&void 0!==t?t:"—"})]}),(0,l.jsx)("div",{className:"text-xs text-slate-500 mt-1 ml-6",children:new Date(e.at).toLocaleString()})]},e.id)})})]}),(0,l.jsxs)(h.nU,{value:"item-card",className:"flex-1 flex flex-col p-4 overflow-y-auto",children:[(0,l.jsx)("div",{className:"font-semibold text-lg mb-4 text-slate-900",children:"Lead Information"}),(0,l.jsxs)("form",{className:"flex flex-col gap-3 flex-1",onSubmit:e=>{e.preventDefault(),R()},children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"company",children:"Company"}),(0,l.jsx)(C.I,{id:"company",value:i.company,onChange:e=>d({...i,company:e.target.value}),required:!0,className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"status",children:"Status"}),(0,l.jsxs)(F.Ph,{value:i.status,onValueChange:e=>d({...i,status:e}),children:[(0,l.jsx)(F.i4,{id:"status",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",children:(0,l.jsx)(F.ki,{placeholder:"Select Status"})}),(0,l.jsx)(F.Bw,{children:U.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"owner",children:"Owner"}),(0,l.jsxs)(F.Ph,{value:i.owner,onValueChange:e=>d({...i,owner:e}),children:[(0,l.jsx)(F.i4,{id:"owner",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",children:(0,l.jsx)(F.ki,{placeholder:"Select Owner"})}),(0,l.jsx)(F.Bw,{children:P.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"value",children:"Value (CAD)"}),(0,l.jsx)(C.I,{id:"value",type:"number",min:0,value:i.value,onChange:e=>d({...i,value:Number(e.target.value)}),required:!0,className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"nextFollowUp",children:"Next Follow-up"}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsx)(m.z,{variant:"outline",className:(0,y.cn)("w-full justify-start text-left font-normal",!i.nextFollowUp&&"text-muted-foreground"),children:i.nextFollowUp?(0,A.WU)(new Date(i.nextFollowUp),"PPP"):(0,l.jsx)("span",{children:"Pick a date"})})}),(0,l.jsx)(z.yk,{className:"w-auto p-0",children:(0,l.jsx)(S.f,{mode:"single",selected:i.nextFollowUp?new Date(i.nextFollowUp):void 0,onSelect:e=>d({...i,nextFollowUp:e?(0,A.WU)(e,"yyyy-MM-dd"):void 0}),initialFocus:!0})})]})]}),"priority"in i&&(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"priority",children:"Priority"}),(0,l.jsxs)(F.Ph,{value:i.priority,onValueChange:e=>d({...i,priority:e}),children:[(0,l.jsx)(F.i4,{id:"priority",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",children:(0,l.jsx)(F.ki,{placeholder:"Select Priority"})}),(0,l.jsx)(F.Bw,{children:D.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e},e))})]})]}),"notes"in i&&(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"notes",children:"Ongoing Notes"}),(0,l.jsx)(p.g,{id:"notes",value:i.notes,onChange:e=>d({...i,notes:e.target.value}),className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),i.customFields&&Object.keys(i.customFields).length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"font-semibold mt-4 text-slate-900",children:"Custom Fields"}),Object.entries(i.customFields).map(e=>{let[s,t]=e;return(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"custom-".concat(s),children:s}),(0,l.jsx)(C.I,{id:"custom-".concat(s),value:t,onChange:e=>d({...i,customFields:{...i.customFields,[s]:e.target.value}}),className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]},s)})]}),(0,l.jsxs)("div",{className:"mt-auto pt-4 border-t border-slate-200 flex justify-end gap-2",children:[(0,l.jsx)(m.z,{type:"button",variant:"secondary",onClick:a,className:"bg-slate-100 hover:bg-slate-200 text-slate-800",children:"Close"}),(0,l.jsx)(m.z,{type:"submit",disabled:o,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:"Save Changes"})]})]})]})]})]})]})}let M={New:"bg-slate-100 text-slate-800 border border-slate-200","In Progress":"bg-sky-100 text-sky-800 border border-sky-200",Negotiation:"bg-fuchsia-100 text-fuchsia-800 border border-fuchsia-200",Won:"bg-teal-100 text-teal-800 border border-teal-200",Lost:"bg-rose-100 text-rose-800 border border-rose-200"};function I(e){let{status:s,isEmpty:t=!1}=e;return t||!s?(0,l.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium border border-slate-300 bg-white text-transparent",children:"\xa0"}):(0,l.jsx)("span",{className:(0,y.cn)("px-2 py-0.5 rounded-full text-xs font-medium",M[s]),children:s})}var Z=t(8030);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let O=(0,Z.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_={Critical:"bg-amber-100 text-amber-900 border border-amber-200",High:"bg-purple-100 text-purple-800 border border-purple-200",Medium:"bg-blue-100 text-blue-800 border border-blue-200",Low:"bg-slate-100 text-slate-700 border border-slate-200"};function T(e){let{priority:s,icon:t,isEmpty:a=!1}=e;return a||!s?(0,l.jsx)("span",{className:"inline-flex items-center justify-center h-7 w-20 rounded-full text-xs font-medium border border-slate-300 bg-white text-transparent",children:"\xa0"}):(0,l.jsxs)("span",{className:(0,y.cn)("inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",_[s]),children:["Critical"===s&&(0,l.jsx)(O,{className:"w-3 h-3"}),t,s]})}var V=t(8859),E=t(4541),q=t(7592);let W=["","New","In Progress","Negotiation","Won","Lost"],B=["","Critical","High","Medium","Low"];function H(e){let{initialRows:s=12,onOpenDrawer:t,tempLeads:a,setTempLeads:n,onAddRow:i}=e,[d,o]=(0,r.useState)(new Set),[c,x]=(0,r.useState)(null),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{h.current&&c&&h.current.focus()},[c]);let u=(e,s)=>{o(t=>{let a=new Set(t);return s?a.add(e):a.delete(e),a})},p=e=>{e?o(new Set(a.map(e=>e.id))):o(new Set)},b=(e,s,t)=>{n(a=>a.map(a=>a.id===e?{...a,[s]:t}:a))},j=(e,s,t)=>{"Enter"===e.key?x(null):"Escape"===e.key&&x(null)};return(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/98 shadow-sm",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 h-12",children:[(0,l.jsx)("th",{className:"w-12 px-3 py-2 text-left",children:(0,l.jsx)(E.X,{checked:d.size===a.length&&a.length>0,onCheckedChange:e=>p(e),"aria-label":"Select all"})}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Task"}),(0,l.jsx)("th",{className:"w-44 px-3 py-2 text-left text-slate-600 font-semibold",children:"Status"}),(0,l.jsx)("th",{className:"w-28 px-3 py-2 text-left text-slate-600 font-semibold",children:"Date"}),(0,l.jsx)("th",{className:"w-36 px-3 py-2 text-left text-slate-600 font-semibold",children:"Priority"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Ongoing Notes"})]})}),(0,l.jsx)("tbody",{children:a.map(e=>{let s=d.has(e.id);return(0,l.jsxs)("tr",{className:(0,y.cn)("h-14 border-b border-slate-100 hover:bg-slate-50 transition-colors group",s&&"bg-emerald-50 border-l-4 border-emerald-600"),children:[(0,l.jsx)("td",{className:"w-12 px-3 py-2",children:(0,l.jsx)(E.X,{checked:s,onCheckedChange:s=>u(e.id,s),"aria-label":"Select row ".concat(e.company)})}),(0,l.jsx)("td",{className:"px-3 py-2 text-slate-900 font-medium",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m.z,{variant:"ghost",size:"icon",className:"h-auto w-auto p-0 text-slate-400 group-hover:text-slate-700 transition-colors",onClick:()=>t(e),children:(0,l.jsx)(q.Z,{className:"w-4 h-4"})}),(null==c?void 0:c.id)===e.id&&"company"===c.field?(0,l.jsx)(C.I,{ref:h,value:e.company,onChange:s=>b(e.id,"company",s.target.value),onBlur:()=>x(null),onKeyDown:s=>j(s,e.id,"company"),className:"h-8 px-2 py-1 text-sm border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"}):(0,l.jsx)("span",{onClick:()=>x({id:e.id,field:"company"}),className:"flex-1 cursor-text",children:e.company||"New Task"}),(0,l.jsx)(m.z,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-700",onClick:()=>t(e),children:(0,l.jsx)(V.v,{count:0,className:"ml-2"})})]})}),(0,l.jsx)("td",{className:"w-44 px-3 py-2",children:(0,l.jsxs)(F.Ph,{value:e.status,onValueChange:s=>b(e.id,"status",s),children:[(0,l.jsx)(F.i4,{className:"h-7 w-24 px-2 py-0.5 text-xs border-slate-300 rounded-full bg-white text-slate-700 hover:bg-slate-50",children:(0,l.jsx)(F.ki,{placeholder:e.status?(0,l.jsx)(I,{status:e.status}):(0,l.jsx)(I,{status:"",isEmpty:!0})})}),(0,l.jsx)(F.Bw,{children:W.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e?(0,l.jsx)(I,{status:e}):"Select Status"},e||"empty"))})]})}),(0,l.jsx)("td",{className:"w-28 px-3 py-2 text-slate-700",children:(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsx)(m.z,{variant:"ghost",className:(0,y.cn)("h-7 w-full justify-start text-left font-normal px-2 py-0.5 text-xs",!e.nextFollowUp&&"text-slate-500"),children:e.nextFollowUp?(0,A.WU)(new Date(e.nextFollowUp),"MMM d"):"Set Date"})}),(0,l.jsx)(z.yk,{className:"w-auto p-0",children:(0,l.jsx)(S.f,{mode:"single",selected:e.nextFollowUp?new Date(e.nextFollowUp):void 0,onSelect:s=>b(e.id,"nextFollowUp",s?(0,A.WU)(s,"yyyy-MM-dd"):void 0),initialFocus:!0})})]})}),(0,l.jsx)("td",{className:"w-36 px-3 py-2",children:(0,l.jsxs)(F.Ph,{value:e.priority,onValueChange:s=>b(e.id,"priority",s),children:[(0,l.jsx)(F.i4,{className:"h-7 w-20 px-2 py-0.5 text-xs border-slate-300 rounded-full bg-white text-slate-700 hover:bg-slate-50",children:(0,l.jsx)(F.ki,{placeholder:e.priority?(0,l.jsx)(T,{priority:e.priority}):(0,l.jsx)(T,{priority:"",isEmpty:!0})})}),(0,l.jsx)(F.Bw,{children:B.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e?(0,l.jsx)(T,{priority:e}):"Select Priority"},e||"empty"))})]})}),(0,l.jsx)("td",{className:"px-3 py-2 text-slate-600 max-w-xs truncate",children:(null==c?void 0:c.id)===e.id&&"notes"===c.field?(0,l.jsx)(C.I,{ref:h,value:e.notes,onChange:s=>b(e.id,"notes",s.target.value),onBlur:()=>x(null),onKeyDown:s=>j(s,e.id,"notes"),className:"h-8 px-2 py-1 text-sm border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"}):(0,l.jsx)("span",{onClick:()=>x({id:e.id,field:"notes"}),className:"flex-1 cursor-text",children:e.notes||"Add notes..."})})]},e.id)})})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4 px-4 py-2 text-sm text-slate-600 border-t border-slate-200",children:[(0,l.jsx)("span",{children:0===a.length?"No tasks":"showing 1–".concat(a.length," of ").concat(a.length)}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.z,{variant:"outline",size:"sm",disabled:!0,className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Prev"}),(0,l.jsx)(m.z,{variant:"outline",size:"sm",disabled:!0,className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Next"})]})]})]})}new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",maximumFractionDigits:0});let Y=e=>({1:"Critical",2:"High",3:"Medium",4:"Low",5:"Critical",6:"High",7:"Medium",8:"Low"})[String(e.charCodeAt(0)%8+1)]||"Low",Q=e=>({1:2,2:0,3:5,4:0,5:1,6:0,7:3,8:0})[String(e.charCodeAt(0)%8+1)]||0;function X(e){let{onOpenEmptyDrawer:s,tempLeads:t,setTempLeads:a,onAddEmptyRow:n}=e,{items:i,total:d,page:o,pageSize:c,setPage:h,refresh:u}=x(),[p,b]=(0,r.useState)(null),[j,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(new Set),N=0===d?0:(o-1)*c+1,w=Math.min(o*c,d),C=(e,s)=>{v(t=>{let a=new Set(t);return s?a.add(e):a.delete(e),a})},k=e=>{e?v(new Set(i.map(e=>e.id))):v(new Set)};return i&&0!==i.length?(0,l.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200 sticky top-0",children:[(0,l.jsx)("th",{className:"w-12 px-3 py-2 text-left",children:(0,l.jsx)(E.X,{checked:f.size===i.length&&i.length>0,onCheckedChange:e=>k(e),"aria-label":"Select all"})}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Task"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Status"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Date"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Priority"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left text-slate-600 font-semibold",children:"Ongoing Notes"})]})}),(0,l.jsxs)("tbody",{children:[i.map(e=>{var s,t;let a=f.has(e.id),r=Q(e.id),n=Y(e.id);return(0,l.jsxs)("tr",{className:(0,y.cn)("h-12 border-t border-slate-100 hover:bg-slate-50 transition-colors group",a&&"bg-emerald-50 border-l-4 border-emerald-600"),children:[(0,l.jsx)("td",{className:"w-12 px-3 py-2",children:(0,l.jsx)(E.X,{checked:a,onCheckedChange:s=>C(e.id,s),"aria-label":"Select row ".concat(e.company)})}),(0,l.jsx)("td",{className:"px-3 py-2 text-slate-900 font-medium cursor-pointer",onClick:()=>{b(e),g(!0)},children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(q.Z,{className:"w-4 h-4 text-slate-400 group-hover:text-slate-700 transition-colors"}),e.company,r>0&&(0,l.jsx)(V.v,{count:r,className:"ml-2"})]})}),(0,l.jsx)("td",{className:"px-3 py-2",children:(0,l.jsx)(I,{status:e.status})}),(0,l.jsx)("td",{className:"px-3 py-2 text-slate-700",children:e.nextFollowUp?e.nextFollowUp.slice(0,10):"N/A"}),(0,l.jsx)("td",{className:"px-3 py-2",children:(0,l.jsx)(T,{priority:n})}),(0,l.jsx)("td",{className:"px-3 py-2 text-slate-600 max-w-xs truncate",children:(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsx)(m.z,{variant:"ghost",size:"sm",className:"h-auto p-0 text-slate-600 hover:text-slate-900",children:(null===(s=e.customFields)||void 0===s?void 0:s.notes)||"Add notes..."})}),(0,l.jsx)(z.yk,{className:"w-80 p-2 text-sm text-slate-700",children:(null===(t=e.customFields)||void 0===t?void 0:t.notes)||"No ongoing notes."})]})})]},e.id)}),0===i.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"text-center text-slate-400 py-6",children:"No leads found."})})]})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4 px-4 py-2 text-sm text-slate-600 border-t border-slate-200",children:[(0,l.jsx)("span",{children:0===d?"No leads":"showing ".concat(N,"–").concat(w," of ").concat(d)}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>h(o-1),disabled:o<=1,className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Prev"}),(0,l.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>h(o+1),disabled:o*c>=d,className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Next"})]})]}),(0,l.jsx)(L,{lead:p,open:j,onClose:()=>g(!1),onSaved:u})]}):(0,l.jsx)(H,{onOpenDrawer:s,tempLeads:t,setTempLeads:a,onAddRow:n})}var J=t(7398);let R=["New","In Progress","Negotiation","Won","Lost"],G=["Yash","Alexis","Ops"];function K(e){let{open:s,onClose:t}=e,{addLead:a,customFields:n}=x(),[i,d]=(0,r.useState)(""),[o,c]=(0,r.useState)("New"),[h,u]=(0,r.useState)("Yash"),[p,b]=(0,r.useState)(0),[j,g]=(0,r.useState)(""),[f,v]=(0,r.useState)({});return s?(0,l.jsx)("div",{className:"fixed inset-0 bg-slate-900/30 flex items-center justify-center z-50",children:(0,l.jsxs)(J.E.form,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:200,damping:25},onSubmit:function(e){e.preventDefault(),i&&j&&(a({company:i,status:o,owner:h,value:p,nextFollowUp:j,customFields:f}),t(),d(""),c("New"),u("Yash"),b(0),g(""),v({}))},className:"bg-white text-slate-900 rounded-xl shadow-lg p-6 w-80 flex flex-col gap-3 border border-slate-200",children:[(0,l.jsx)("div",{className:"text-lg font-semibold mb-2 text-slate-900",children:"New Deal"}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"company",children:"Company"}),(0,l.jsx)(C.I,{id:"company",placeholder:"Company Name",value:i,onChange:e=>d(e.target.value),required:!0,className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"status",children:"Status"}),(0,l.jsxs)(F.Ph,{value:o,onValueChange:e=>c(e),children:[(0,l.jsx)(F.i4,{id:"status",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",children:(0,l.jsx)(F.ki,{placeholder:"Select Status"})}),(0,l.jsx)(F.Bw,{children:R.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"owner",children:"Owner"}),(0,l.jsxs)(F.Ph,{value:h,onValueChange:e=>u(e),children:[(0,l.jsx)(F.i4,{id:"owner",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",children:(0,l.jsx)(F.ki,{placeholder:"Select Owner"})}),(0,l.jsx)(F.Bw,{children:G.map(e=>(0,l.jsx)(F.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"value",children:"Value (CAD)"}),(0,l.jsx)(C.I,{id:"value",type:"number",min:0,placeholder:"0",value:p,onChange:e=>b(Number(e.target.value)),required:!0,className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"nextFollowUp",children:"Next Follow-up"}),(0,l.jsx)(C.I,{id:"nextFollowUp",type:"date",value:j,onChange:e=>g(e.target.value),required:!0,className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500"})]}),n.length>0&&(0,l.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,l.jsx)("div",{className:"font-semibold text-sm text-slate-700",children:"Custom Fields"}),n.map(e=>(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(k._,{htmlFor:"custom-".concat(e.name),children:e.label}),(0,l.jsx)(C.I,{id:"custom-".concat(e.name),className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",placeholder:e.label,value:f[e.name]||"",onChange:s=>v(t=>({...t,[e.name]:s.target.value}))})]},e.name))]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,l.jsx)(m.z,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg",children:"Add Deal"}),(0,l.jsx)(m.z,{type:"button",variant:"secondary",onClick:t,className:"bg-slate-100 hover:bg-slate-200 text-slate-800",children:"Cancel"})]})]})}):null}let $=["New","In Progress","Negotiation","Won","Lost"],ee=new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",maximumFractionDigits:0});function es(e){let{onSelect:s}=e,t=x(e=>e.items),a=x(e=>e.refresh),[n,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:$.map(e=>{let a=t.filter(s=>s.status===e);return(0,l.jsxs)("div",{className:"min-w-[280px] flex-1 bg-slate-50 rounded-lg border border-slate-200 p-3 flex flex-col shadow-sm",children:[(0,l.jsxs)("div",{className:"font-semibold mb-3 flex items-center justify-between text-slate-900",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full",children:a.length})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[a.map(e=>(0,l.jsxs)(m.z,{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-3 text-left hover:shadow-md transition-all cursor-pointer h-auto flex flex-col items-start gap-1",onClick:()=>s(e),variant:"ghost",children:[(0,l.jsx)("div",{className:"font-medium text-slate-900",children:e.company}),(0,l.jsx)("div",{className:"text-xs text-slate-600",children:e.owner}),(0,l.jsx)("div",{className:"text-sm font-semibold text-emerald-700",children:ee.format(e.value)}),(0,l.jsxs)("div",{className:"text-xs text-slate-500",children:["Next: ",e.nextFollowUp?e.nextFollowUp.slice(0,10):"N/A"]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(I,{status:e.status})})]},e.id)),0===a.length&&(0,l.jsx)("div",{className:"text-sm text-slate-500 text-center py-6",children:"No leads in this stage."})]})]},e)})}),(0,l.jsx)(L,{lead:n,open:d,onClose:()=>o(!1),onSaved:a})]})}function et(e){let{open:s,onClose:t}=e,{customFields:a,addCustomField:n,renameCustomField:i,deleteCustomField:d}=x(),[o,c]=(0,r.useState)({name:"",label:""}),[h,u]=(0,r.useState)(null),[p,b]=(0,r.useState)({name:"",label:""});function j(e){e.preventDefault(),null!==h&&(i(a[h].name,p.name,p.label),u(null))}return s?(0,l.jsx)("div",{className:"fixed inset-0 bg-slate-900/30 flex items-center justify-center z-50",children:(0,l.jsxs)(J.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:200,damping:25},className:"bg-white text-slate-900 rounded-xl shadow-lg p-6 w-96 border border-slate-200",children:[(0,l.jsx)("div",{className:"text-lg font-semibold mb-3 text-slate-900",children:"Manage Custom Fields"}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.name&&o.label&&(n({...o}),c({name:"",label:""}))},className:"flex gap-2 mb-4",children:[(0,l.jsxs)("div",{className:"grid gap-1 flex-1",children:[(0,l.jsx)(k._,{htmlFor:"new-field-name",className:"sr-only",children:"Field Name"}),(0,l.jsx)(C.I,{id:"new-field-name",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Field name (e.g. industry)",value:o.name,onChange:e=>c(s=>({...s,name:e.target.value})),required:!0})]}),(0,l.jsxs)("div",{className:"grid gap-1 flex-1",children:[(0,l.jsx)(k._,{htmlFor:"new-field-label",className:"sr-only",children:"Label"}),(0,l.jsx)(C.I,{id:"new-field-label",className:"border-slate-200 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Label (e.g. Industry)",value:o.label,onChange:e=>c(s=>({...s,label:e.target.value})),required:!0})]}),(0,l.jsx)(m.z,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg",children:"Add"})]}),(0,l.jsxs)("ul",{className:"space-y-2 mb-4",children:[a.map((e,s)=>(0,l.jsx)("li",{className:"flex items-center gap-2 text-slate-700 p-2 bg-slate-50 rounded-md border border-slate-100",children:h===s?(0,l.jsxs)("form",{onSubmit:j,className:"flex gap-2 flex-1",children:[(0,l.jsx)(C.I,{className:"border-slate-200 bg-white rounded px-2 py-1 flex-1 text-slate-900 focus:border-emerald-500 focus:ring-emerald-500",value:p.name,onChange:e=>b(s=>({...s,name:e.target.value})),required:!0}),(0,l.jsx)(C.I,{className:"border-slate-200 bg-white rounded px-2 py-1 flex-1 text-slate-900 focus:border-emerald-500 focus:ring-emerald-500",value:p.label,onChange:e=>b(s=>({...s,label:e.target.value})),required:!0}),(0,l.jsx)(m.z,{type:"submit",size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:"Save"}),(0,l.jsx)(m.z,{type:"button",size:"sm",variant:"secondary",onClick:()=>u(null),className:"bg-slate-100 hover:bg-slate-200 text-slate-800",children:"Cancel"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"flex-1",children:[e.label," ",(0,l.jsxs)("span",{className:"text-xs text-slate-500",children:["(",e.name,")"]})]}),(0,l.jsx)(m.z,{size:"sm",variant:"secondary",onClick:()=>{u(s),b({...a[s]})},className:"bg-slate-100 hover:bg-slate-200 text-slate-800",children:"Rename"}),(0,l.jsx)(m.z,{size:"sm",variant:"destructive",onClick:()=>d(e.name),className:"bg-rose-600 hover:bg-rose-700 text-white",children:"Delete"})]})},e.name)),0===a.length&&(0,l.jsx)("li",{className:"text-slate-500 text-sm text-center py-4",children:"No custom fields defined."})]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(m.z,{variant:"secondary",onClick:t,className:"bg-slate-100 hover:bg-slate-200 text-slate-800",children:"Close"})})]})}):null}var ea=t(7138),el=t(6463);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let er=(0,Z.Z)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),en=(0,Z.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ei=(0,Z.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ed=(0,Z.Z)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);var eo=t(1568);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ec=(0,Z.Z)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var ex=t(3852),em=t(5293),eh=t(2421),eu=t(9973);let ep=[{name:"Tasks",href:"/crm",icon:er},{name:"Sprints",href:"/crm/sprints",icon:en},{name:"Epics",href:"/crm/epics",icon:ei},{name:"Bugs Queue",href:"/crm/bugs",icon:ed},{name:"Retrospectives",href:"/crm/retrospectives",icon:eo.Z},{name:"Getting Started",href:"/crm/getting-started",icon:ec},{name:"Master Tracker",href:"/crm/master-tracker",icon:ex.Z}];function eb(){let e=(0,el.usePathname)();return(0,l.jsxs)("aside",{className:"w-[280px] bg-white border-r border-slate-200 flex flex-col py-6 px-4",children:[(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"ghost",className:"justify-between px-3 py-2 mb-6 text-lg font-semibold text-slate-900 hover:bg-slate-50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(em.Z,{className:"w-5 h-5 text-emerald-600"}),"Sattva Leaf"]}),(0,l.jsx)(eh.Z,{className:"w-4 h-4 text-slate-500"})]})}),(0,l.jsx)(z.yk,{className:"w-48 p-1",children:(0,l.jsx)("div",{className:"text-sm text-slate-700 p-2",children:"No other workspaces available."})})]}),(0,l.jsx)("nav",{className:"flex flex-col gap-1",children:ep.map(s=>{let{name:t,href:a,icon:r}=s;return(0,l.jsxs)(ea.default,{href:a,className:(0,y.cn)("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",e===a?"bg-emerald-50 text-emerald-800 border-l-4 border-emerald-600 -ml-4 pl-3":"text-slate-600 hover:bg-slate-50"),children:[(0,l.jsx)(r,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:t})]},a)})}),(0,l.jsx)(eu.Z,{className:"my-4 bg-slate-200"}),(0,l.jsxs)(ea.default,{href:"/crm/sattva-leaf-tasks",className:(0,y.cn)("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors","/crm/sattva-leaf-tasks"===e?"bg-emerald-50 text-emerald-800 border-l-4 border-emerald-600 -ml-4 pl-3":"text-slate-600 hover:bg-slate-50"),children:[(0,l.jsx)(er,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Sattva Leaf Tasks"})]})]})}var ej=t(1590),eg=t(2513),ef=t(4817),ev=t(2022),eN=t(404),ew=t(6900);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ey=(0,Z.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var eC=t(6477),ek=t(3550);let eF=["Main table","Board","Dashboard","Files","Gantt","Workload","Calendar","Log","Form","Chart","Card","Roadmap tracker"],eS=["All","New","In Progress","Negotiation","Won","Lost"],ez=["All","Yash","Alexis","Ops"],eA=[{label:"Company (A-Z)",value:"company-asc"},{label:"Company (Z-A)",value:"company-desc"},{label:"Value (Low-High)",value:"value-asc"},{label:"Value (High-Low)",value:"value-desc"},{label:"Next Follow-up (Asc)",value:"nextFollowUp-asc"},{label:"Next Follow-up (Desc)",value:"nextFollowUp-desc"}],eU=["Status","Owner","Value","Next Follow-up","Notes"];function eP(e){let{onNewDealClick:s}=e,{q:t,status:a,owner:n,setFilters:i,refresh:d}=x(),[o,c]=(0,r.useState)("Main table"),[h,u]=(0,r.useState)(t||""),[p,b]=(0,r.useState)(a||"All"),[j,g]=(0,r.useState)(n||"All"),[f,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(eU.reduce((e,s)=>({...e,[s]:!0}),{})),k=e=>{b(e),i({status:e}),d()},F=e=>{g(e),i({owner:e}),d()},S=e=>{v(e),console.log("Sort by:",e),d()},A=e=>{w(s=>({...s,[e]:!s[e]}))};return(0,l.jsxs)("div",{className:"bg-white border-b border-slate-200 px-6 py-3",children:[(0,l.jsx)("div",{className:"flex items-center gap-4 mb-4 border-b border-slate-200 -mx-6 px-6",children:eF.map((e,s)=>(0,l.jsxs)(m.z,{variant:"ghost",onClick:()=>c(e),className:(0,y.cn)("relative text-sm font-medium text-slate-600 hover:text-slate-900 pb-3 pt-2",o===e&&"text-emerald-700 after:absolute after:bottom-0 after:left-0 after:w-full after:h-[2px] after:bg-emerald-600"),children:[e,s===eF.length-1&&(0,l.jsx)(m.z,{variant:"ghost",size:"sm",className:"ml-2 p-0 h-auto w-auto text-slate-500 hover:text-slate-700",children:(0,l.jsx)(eg.Z,{className:"w-4 h-4"})})]},e))}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsxs)(ej.h_,{children:[(0,l.jsx)(ej.$F,{asChild:!0,children:(0,l.jsxs)(m.z,{className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-1",children:[(0,l.jsx)(eg.Z,{className:"w-4 h-4"})," New Task ",(0,l.jsx)(eh.Z,{className:"w-4 h-4 ml-1"})]})}),(0,l.jsxs)(ej.AW,{align:"start",children:[(0,l.jsx)(ej.Xi,{onClick:s,children:"New Deal"})," ",(0,l.jsx)(ej.Xi,{children:"New Project (Placeholder)"})]})]}),(0,l.jsxs)("div",{className:"relative flex-1 min-w-[150px] max-w-xs",children:[(0,l.jsx)(ef.Z,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,l.jsx)(C.I,{type:"text",placeholder:"Search...",className:"pl-8 pr-2 py-1 border border-slate-200 rounded-md text-sm focus:border-emerald-500 focus:ring-emerald-500",value:h,onChange:e=>{u(e.target.value),i({q:e.target.value}),d()}})]}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"outline",className:"flex items-center gap-1 text-slate-700 border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)(ev.Z,{className:"w-4 h-4"})," Person","All"!==j&&(0,l.jsx)("span",{className:"ml-1 text-xs font-semibold bg-emerald-100 text-emerald-800 px-1.5 py-0.5 rounded-full",children:j})]})}),(0,l.jsx)(z.yk,{className:"w-48 p-1",children:ez.map(e=>(0,l.jsx)(ej.Xi,{onClick:()=>F(e),children:e},e))})]}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"outline",className:"flex items-center gap-1 text-slate-700 border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)(eN.Z,{className:"w-4 h-4"})," Filter",("All"!==p||"All"!==j)&&(0,l.jsx)("span",{className:"ml-1 text-xs font-semibold bg-emerald-100 text-emerald-800 px-1.5 py-0.5 rounded-full",children:"Active"})]})}),(0,l.jsxs)(z.yk,{className:"w-64 p-2",children:[(0,l.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Filters"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Status"}),(0,l.jsx)("select",{className:"w-full border border-slate-200 rounded-md px-2 py-1 text-sm",value:p,onChange:e=>k(e.target.value),children:eS.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Owner"}),(0,l.jsx)("select",{className:"w-full border border-slate-200 rounded-md px-2 py-1 text-sm",value:j,onChange:e=>F(e.target.value),children:ez.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Date (Placeholder)"}),(0,l.jsx)(C.I,{type:"date",className:"w-full border border-slate-200 rounded-md px-2 py-1 text-sm"})]})]})]})]}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"outline",className:"flex items-center gap-1 text-slate-700 border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)(ew.Z,{className:"w-4 h-4"})," Sort",f&&(0,l.jsx)("span",{className:"ml-1 text-xs font-semibold bg-emerald-100 text-emerald-800 px-1.5 py-0.5 rounded-full",children:"Active"})]})}),(0,l.jsx)(z.yk,{className:"w-48 p-1",children:eA.map(e=>(0,l.jsx)(ej.Xi,{onClick:()=>S(e.value),children:e.label},e.value))})]}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"outline",className:"flex items-center gap-1 text-slate-700 border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)(ey,{className:"w-4 h-4"})," Hide"]})}),(0,l.jsxs)(z.yk,{className:"w-48 p-2",children:[(0,l.jsx)("div",{className:"text-sm font-semibold mb-2",children:"Hide Columns"}),(0,l.jsx)("div",{className:"space-y-1",children:eU.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("input",{type:"checkbox",checked:N[e],onChange:()=>A(e),className:"form-checkbox h-4 w-4 text-emerald-600 rounded border-slate-300 focus:ring-emerald-500"})]},e))})]})]}),(0,l.jsxs)(z.J2,{children:[(0,l.jsx)(z.xo,{asChild:!0,children:(0,l.jsxs)(m.z,{variant:"outline",className:"flex items-center gap-1 text-slate-700 border-slate-200 hover:bg-slate-50",children:[(0,l.jsx)(eC.Z,{className:"w-4 h-4"})," Group by"]})}),(0,l.jsx)(z.yk,{className:"w-48 p-2",children:(0,l.jsx)("div",{className:"text-sm text-slate-700",children:"Group by (Placeholder)"})})]}),(0,l.jsxs)(ej.h_,{children:[(0,l.jsx)(ej.$F,{asChild:!0,children:(0,l.jsx)(m.z,{variant:"outline",size:"icon",className:"text-slate-700 border-slate-200 hover:bg-slate-50",children:(0,l.jsx)(ek.Z,{className:"w-4 h-4"})})}),(0,l.jsxs)(ej.AW,{align:"end",children:[(0,l.jsx)(ej.Xi,{children:"Placeholder Option 1"}),(0,l.jsx)(ej.Xi,{children:"Placeholder Option 2"})]})]})]})]})}let eD=["Table","Lanes"];function eL(){let{refresh:e,items:s}=x(),[t,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)("Table"),[c,h]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[b,j]=(0,r.useState)(()=>Array.from({length:12}).map((e,s)=>({id:"temp-".concat(s+1),company:"",status:"",owner:"",value:0,nextFollowUp:void 0,priority:"",notes:"",customFields:{}})));(0,r.useEffect)(()=>{e()},[e]);let g=e=>{h(e),p(!0)},f=()=>{j(e=>[{id:"temp-".concat(e.length+1),company:"",status:"",owner:"",value:0,nextFollowUp:void 0,priority:"",notes:"",customFields:{}},...e])};return(0,l.jsxs)("div",{className:"flex h-screen bg-slate-50 text-slate-900",children:[(0,l.jsx)(eb,{}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,l.jsx)("div",{className:"px-6 py-4 border-b border-slate-200 bg-white",children:(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Sattva Leaf Tasks"})}),(0,l.jsx)(eP,{onNewDealClick:f}),(0,l.jsxs)("main",{className:"flex-1 p-6 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[eD.map(e=>(0,l.jsx)(m.z,{variant:"ghost",onClick:()=>o(e),className:(0,y.cn)("text-sm font-medium text-slate-600 hover:text-slate-900",d===e&&"text-emerald-700 border-b-2 border-emerald-600"),children:e},e)),(0,l.jsx)(m.z,{variant:"ghost",onClick:()=>i(!0),className:(0,y.cn)("text-sm font-medium text-slate-600 hover:text-slate-900",n&&"text-emerald-700 border-b-2 border-emerald-600"),children:"Custom Fields"})]}),"Table"===d?(0,l.jsx)(X,{onOpenEmptyDrawer:g,tempLeads:b,setTempLeads:j,onAddEmptyRow:f}):(0,l.jsx)(es,{onSelect:g})]})]}),(0,l.jsx)(K,{open:t,onClose:()=>a(!1)}),(0,l.jsx)(et,{open:n,onClose:()=>i(!1)}),(0,l.jsx)(L,{lead:c,open:u,onClose:()=>p(!1),onSaved:(s,t)=>{t&&j(e=>e.filter(e=>e.id!==t)),e(),p(!1)}})]})}},9973:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7437),l=t(2265),r=t(8484),n=t(9354);let i=l.forwardRef((e,s)=>{let{className:t,orientation:l="horizontal",decorative:i=!0,...d}=e;return(0,a.jsx)(r.f,{ref:s,decorative:i,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...d})});i.displayName=r.f.displayName}},function(e){e.O(0,[787,422,574,424,966,681,915,971,23,744],function(){return e(e.s=7591)}),_N_E=e.O()}]);